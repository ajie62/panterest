{% extends 'base.html.twig' %}

{% block title pin.title %}

{% block body %}
    <article>
        <h1>{{ pin.title }}</h1>
        <p>{{ pin.description }}</p>
    </article>

    <a href="{{ path('app_pins_edit', {id: pin.id}) }}">Edit</a> |
    <a class="js-delete-link" href="#">Delete</a> |
    <a href="{{ path('app_home') }}">Go back</a>

    <form id="js-pin-delete-form" action="{{ path('app_pins_delete', {id: pin.id}) }}" method="POST" style="display: none;">
        <input type="hidden" name="_method" value="DELETE">
    </form>
{% endblock %}

{% block javascripts %}
    {{ parent() }}
    <script>
        const deleteLink = document.querySelector('.js-delete-link');
        deleteLink.addEventListener('click', e => {
            e.preventDefault();
            confirm('Are you sure?') && document.getElementById('js-pin-delete-form').submit();
        });
    </script>
{% endblock %}
